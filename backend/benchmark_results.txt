Run cd backend && go test -race -v ./...
go: downloading github.com/asdine/storm/v3 v3.2.1
go: downloading github.com/goccy/go-yaml v1.11.0
go: downloading github.com/spf13/afero v1.9.5
go: downloading github.com/spf13/cobra v1.7.0
go: downloading github.com/spf13/pflag v1.0.5
go: downloading github.com/stretchr/testify v1.8.4
go: downloading github.com/maruel/natural v1.1.0
go: downloading github.com/golang-jwt/jwt/v4 v4.5.0
go: downloading github.com/gorilla/mux v1.8.0
go: downloading github.com/mholt/archiver/v3 v3.5.1
go: downloading github.com/shirou/gopsutil/v3 v3.23.8
go: downloading github.com/tomasen/realip v0.0.0-20180522021738-f0c99a92ddce
go: downloading golang.org/x/crypto v0.12.0
go: downloading golang.org/x/text v0.13.0
go: downloading github.com/disintegration/imaging v1.6.2
go: downloading github.com/dsoprea/go-exif/v3 v3.0.1
go: downloading github.com/marusama/semaphore/v2 v2.5.0
go: downloading golang.org/x/image v0.12.0
go: downloading github.com/flynn/go-shlex v0.0.0-20150515145356-3f9db97f8568
go: downloading github.com/google/go-cmp v0.5.9
go: downloading golang.org/x/xerrors v0.0.0-20200804184101-5ec99f83aff1
go: downloading go.etcd.io/bbolt v1.3.4
go: downloading github.com/andybalholm/brotli v1.0.1
go: downloading github.com/dsnet/compress v0.0.2-0.20210315054119-f66993602bf5
go: downloading github.com/golang/snappy v0.0.2
go: downloading github.com/klauspost/compress v1.11.4
go: downloading github.com/klauspost/pgzip v1.2.5
go: downloading github.com/nwaples/rardecode v1.1.0
go: downloading github.com/pierrec/lz4/v4 v4.1.2
go: downloading github.com/ulikunitz/xz v0.5.9
go: downloading github.com/xi2/xz v0.0.0-20171230120015-48954b6210f8
go: downloading golang.org/x/sys v0.11.0
go: downloading github.com/dsoprea/go-logging v0.0.0-20200710184922-b02d349568dd
go: downloading github.com/dsoprea/go-utility/v2 v2.0.0-20221003172846-a3e1774ef349
go: downloading github.com/golang/geo v0.0.0-20210211234256-740aa86cb551
go: downloading gopkg.in/yaml.v2 v2.4.0
go: downloading github.com/davecgh/go-spew v1.1.1
go: downloading github.com/pmezard/go-difflib v1.0.0
go: downloading gopkg.in/yaml.v3 v3.0.1
go: downloading github.com/fatih/color v1.10.0
go: downloading github.com/go-errors/errors v1.4.2
go: downloading golang.org/x/net v0.10.0
go: downloading github.com/mattn/go-colorable v0.1.8
go: downloading github.com/mattn/go-isatty v0.0.12
?   	github.com/gtsteffaniak/filebrowser	[no test files]
?   	github.com/gtsteffaniak/filebrowser/cmd	[no test files]
?   	github.com/gtsteffaniak/filebrowser/auth	[no test files]
?   	github.com/gtsteffaniak/filebrowser/errors	[no test files]
?   	github.com/gtsteffaniak/filebrowser/files	[no test files]
=== RUN   TestFileCache
--- PASS: TestFileCache (0.00s)
PASS
ok  	github.com/gtsteffaniak/filebrowser/diskcache	1.011s
=== RUN   TestCommonPrefix
=== RUN   TestCommonPrefix/same_lvl
=== RUN   TestCommonPrefix/sub_folder
=== RUN   TestCommonPrefix/relative_path
=== RUN   TestCommonPrefix/no_common_path
--- PASS: TestCommonPrefix (0.00s)
    --- PASS: TestCommonPrefix/same_lvl (0.00s)
    --- PASS: TestCommonPrefix/sub_folder (0.00s)
    --- PASS: TestCommonPrefix/relative_path (0.00s)
    --- PASS: TestCommonPrefix/no_common_path (0.00s)
PASS
ok  	github.com/gtsteffaniak/filebrowser/fileutils	1.011s
=== RUN   TestPublicShareHandlerAuthentication
=== PAUSE TestPublicShareHandlerAuthentication
=== CONT  TestPublicShareHandlerAuthentication
=== RUN   TestPublicShareHandlerAuthentication/public_share_handler:_Public_share,_no_auth_required
=== PAUSE TestPublicShareHandlerAuthentication/public_share_handler:_Public_share,_no_auth_required
=== RUN   TestPublicShareHandlerAuthentication/public_dl_handler:_Public_share,_no_auth_required
=== PAUSE TestPublicShareHandlerAuthentication/public_dl_handler:_Public_share,_no_auth_required
=== RUN   TestPublicShareHandlerAuthentication/public_share_handler:_Private_share,_no_auth_provided,_401
=== PAUSE TestPublicShareHandlerAuthentication/public_share_handler:_Private_share,_no_auth_provided,_401
=== RUN   TestPublicShareHandlerAuthentication/public_dl_handler:_Private_share,_no_auth_provided,_401
=== PAUSE TestPublicShareHandlerAuthentication/public_dl_handler:_Private_share,_no_auth_provided,_401
=== RUN   TestPublicShareHandlerAuthentication/public_share_handler:_Private_share,_authentication_via_token
=== PAUSE TestPublicShareHandlerAuthentication/public_share_handler:_Private_share,_authentication_via_token
=== RUN   TestPublicShareHandlerAuthentication/public_dl_handler:_Private_share,_authentication_via_token
=== PAUSE TestPublicShareHandlerAuthentication/public_dl_handler:_Private_share,_authentication_via_token
=== RUN   TestPublicShareHandlerAuthentication/public_share_handler:_Private_share,_authentication_via_invalid_token,_401
=== PAUSE TestPublicShareHandlerAuthentication/public_share_handler:_Private_share,_authentication_via_invalid_token,_401
=== RUN   TestPublicShareHandlerAuthentication/public_dl_handler:_Private_share,_authentication_via_invalid_token,_401
=== PAUSE TestPublicShareHandlerAuthentication/public_dl_handler:_Private_share,_authentication_via_invalid_token,_401
=== RUN   TestPublicShareHandlerAuthentication/public_share_handler:_Private_share,_authentication_via_password
=== PAUSE TestPublicShareHandlerAuthentication/public_share_handler:_Private_share,_authentication_via_password
=== RUN   TestPublicShareHandlerAuthentication/public_dl_handler:_Private_share,_authentication_via_password
=== PAUSE TestPublicShareHandlerAuthentication/public_dl_handler:_Private_share,_authentication_via_password
=== RUN   TestPublicShareHandlerAuthentication/public_share_handler:_Private_share,_authentication_via_invalid_password,_401
=== PAUSE TestPublicShareHandlerAuthentication/public_share_handler:_Private_share,_authentication_via_invalid_password,_401
=== RUN   TestPublicShareHandlerAuthentication/public_dl_handler:_Private_share,_authentication_via_invalid_password,_401
=== PAUSE TestPublicShareHandlerAuthentication/public_dl_handler:_Private_share,_authentication_via_invalid_password,_401
=== CONT  TestPublicShareHandlerAuthentication/public_dl_handler:_Public_share,_no_auth_required
=== CONT  TestPublicShareHandlerAuthentication/public_dl_handler:_Private_share,_authentication_via_invalid_token,_401
2023/11/04 13:16:34 Saving new user: username
2023/11/04 13:16:34 Saving new user: username
=== CONT  TestPublicShareHandlerAuthentication/public_dl_handler:_Private_share,_authentication_via_invalid_password,_401
2023/11/04 13:16:35 Saving new user: username
2023/11/04 13:16:35 h: 401  <nil>
=== CONT  TestPublicShareHandlerAuthentication/public_share_handler:_Private_share,_authentication_via_invalid_password,_401
2023/11/04 13:16:35 Saving new user: username
2023/11/04 13:16:38 h: 401  <nil>
=== CONT  TestPublicShareHandlerAuthentication/public_dl_handler:_Private_share,_authentication_via_password
2023/11/04 13:16:38 Saving new user: username
2023/11/04 13:16:38 h: 401  <nil>
=== CONT  TestPublicShareHandlerAuthentication/public_share_handler:_Private_share,_authentication_via_password
2023/11/04 13:16:38 Saving new user: username
=== CONT  TestPublicShareHandlerAuthentication/public_share_handler:_Private_share,_authentication_via_invalid_token,_401
2023/11/04 13:16:40 Saving new user: username
=== CONT  TestPublicShareHandlerAuthentication/public_share_handler:_Private_share,_no_auth_provided,_401
2023/11/04 13:16:40 Saving new user: username
2023/11/04 13:16:41 h: 401  <nil>
=== CONT  TestPublicShareHandlerAuthentication/public_share_handler:_Private_share,_authentication_via_token
2023/11/04 13:16:41 Saving new user: username
2023/11/04 13:16:41 h: 401  <nil>
=== CONT  TestPublicShareHandlerAuthentication/public_dl_handler:_Private_share,_no_auth_provided,_401
2023/11/04 13:16:41 Saving new user: username
2023/11/04 13:16:42 h: 401  <nil>
=== CONT  TestPublicShareHandlerAuthentication/public_dl_handler:_Private_share,_authentication_via_token
2023/11/04 13:16:42 Saving new user: username
=== CONT  TestPublicShareHandlerAuthentication/public_share_handler:_Public_share,_no_auth_required
2023/11/04 13:16:42 Saving new user: username
--- PASS: TestPublicShareHandlerAuthentication (0.00s)
    --- PASS: TestPublicShareHandlerAuthentication/public_dl_handler:_Public_share,_no_auth_required (1.34s)
    --- PASS: TestPublicShareHandlerAuthentication/public_dl_handler:_Private_share,_authentication_via_invalid_token,_401 (1.39s)
    --- PASS: TestPublicShareHandlerAuthentication/public_dl_handler:_Private_share,_authentication_via_invalid_password,_401 (3.06s)
    --- PASS: TestPublicShareHandlerAuthentication/public_share_handler:_Private_share,_authentication_via_invalid_password,_401 (3.02s)
    --- PASS: TestPublicShareHandlerAuthentication/public_share_handler:_Private_share,_authentication_via_password (2.10s)
    --- PASS: TestPublicShareHandlerAuthentication/public_dl_handler:_Private_share,_authentication_via_password (2.18s)
    --- PASS: TestPublicShareHandlerAuthentication/public_share_handler:_Private_share,_authentication_via_invalid_token,_401 (1.08s)
    --- PASS: TestPublicShareHandlerAuthentication/public_share_handler:_Private_share,_no_auth_provided,_401 (1.02s)
    --- PASS: TestPublicShareHandlerAuthentication/public_dl_handler:_Private_share,_no_auth_provided,_401 (0.94s)
    --- PASS: TestPublicShareHandlerAuthentication/public_share_handler:_Private_share,_authentication_via_token (0.97s)
    --- PASS: TestPublicShareHandlerAuthentication/public_dl_handler:_Private_share,_authentication_via_token (1.13s)
    --- PASS: TestPublicShareHandlerAuthentication/public_share_handler:_Public_share,_no_auth_required (1.14s)
PASS
ok  	github.com/gtsteffaniak/filebrowser/http	10.721s
=== RUN   TestService_Resize
=== RUN   TestService_Resize/convert_to_tiff
=== RUN   TestService_Resize/convert_to_bmp
=== RUN   TestService_Resize/resize_png
=== RUN   TestService_Resize/resize_with_low_quality
=== RUN   TestService_Resize/get_thumbnail_from_file_with_APP0_JFIF
=== RUN   TestService_Resize/get_thumbnail_from_file_without_APP0_JFIF
=== RUN   TestService_Resize/fit_downscale
=== RUN   TestService_Resize/convert_to_gif
=== RUN   TestService_Resize/fit_upscale
=== RUN   TestService_Resize/convert_to_jpeg
=== RUN   TestService_Resize/convert_to_png
=== RUN   TestService_Resize/resize_with_medium_quality
=== RUN   TestService_Resize/broken_file
=== RUN   TestService_Resize/fill_upscale
=== RUN   TestService_Resize/fill_downscale
=== RUN   TestService_Resize/resize_for_higher_quality_levels
=== RUN   TestService_Resize/resize_with_high_quality
=== RUN   TestService_Resize/resize_with_unknown_quality
=== RUN   TestService_Resize/resize_gif
=== RUN   TestService_Resize/resize_tiff
=== RUN   TestService_Resize/resize_bmp
=== RUN   TestService_Resize/resize_from_file_without_IFD1_thumbnail
=== RUN   TestService_Resize/keep_original_format
=== RUN   TestService_Resize/convert_to_unknown
--- PASS: TestService_Resize (3.94s)
    --- PASS: TestService_Resize/convert_to_tiff (0.04s)
    --- PASS: TestService_Resize/convert_to_bmp (0.02s)
    --- PASS: TestService_Resize/resize_png (0.05s)
    --- PASS: TestService_Resize/resize_with_low_quality (0.03s)
    --- PASS: TestService_Resize/get_thumbnail_from_file_with_APP0_JFIF (0.03s)
    --- PASS: TestService_Resize/get_thumbnail_from_file_without_APP0_JFIF (0.11s)
    --- PASS: TestService_Resize/fit_downscale (0.03s)
    --- PASS: TestService_Resize/convert_to_gif (0.02s)
    --- PASS: TestService_Resize/fit_upscale (0.00s)
    --- PASS: TestService_Resize/convert_to_jpeg (0.02s)
    --- PASS: TestService_Resize/convert_to_png (0.03s)
    --- PASS: TestService_Resize/resize_with_medium_quality (0.03s)
    --- PASS: TestService_Resize/broken_file (0.00s)
    --- PASS: TestService_Resize/fill_upscale (0.01s)
    --- PASS: TestService_Resize/fill_downscale (0.03s)
    --- PASS: TestService_Resize/resize_for_higher_quality_levels (0.09s)
    --- PASS: TestService_Resize/resize_with_high_quality (0.06s)
    --- PASS: TestService_Resize/resize_with_unknown_quality (0.03s)
    --- PASS: TestService_Resize/resize_gif (0.04s)
    --- PASS: TestService_Resize/resize_tiff (0.04s)
    --- PASS: TestService_Resize/resize_bmp (0.02s)
    --- PASS: TestService_Resize/resize_from_file_without_IFD1_thumbnail (3.13s)
    --- PASS: TestService_Resize/keep_original_format (0.03s)
    --- PASS: TestService_Resize/convert_to_unknown (0.02s)
=== RUN   TestService_FormatFromExtension
=== RUN   TestService_FormatFromExtension/tiff
=== RUN   TestService_FormatFromExtension/bmp
=== RUN   TestService_FormatFromExtension/unknown
=== RUN   TestService_FormatFromExtension/jpg
=== RUN   TestService_FormatFromExtension/jpeg
=== RUN   TestService_FormatFromExtension/png
=== RUN   TestService_FormatFromExtension/gif
--- PASS: TestService_FormatFromExtension (0.00s)
    --- PASS: TestService_FormatFromExtension/tiff (0.00s)
    --- PASS: TestService_FormatFromExtension/bmp (0.00s)
    --- PASS: TestService_FormatFromExtension/unknown (0.00s)
    --- PASS: TestService_FormatFromExtension/jpg (0.00s)
    --- PASS: TestService_FormatFromExtension/jpeg (0.00s)
    --- PASS: TestService_FormatFromExtension/png (0.00s)
    --- PASS: TestService_FormatFromExtension/gif (0.00s)
PASS
ok  	github.com/gtsteffaniak/filebrowser/img	4.954s
=== RUN   TestGetIndex
--- PASS: TestGetIndex (0.00s)
=== RUN   TestInitializeIndex
--- PASS: TestInitializeIndex (0.00s)
=== RUN   Test_indexingScheduler
--- PASS: Test_indexingScheduler (0.00s)
=== RUN   TestParseSearch
--- PASS: TestParseSearch (0.00s)
=== RUN   TestSearchIndexes
=== RUN   TestSearchIndexes/audio
2023/11/04 13:16:40 matched:  test/ scope: new/
2023/11/04 13:16:40 matched:  test/path/ scope: new/
=== RUN   TestSearchIndexes/test
2023/11/04 13:16:40 matched:  test/ scope: 
2023/11/04 13:16:40 matched:  test/path/ scope: 
2023/11/04 13:16:40 matched:  new/ scope: 
2023/11/04 13:16:40 matched:  new/test/ scope: 
2023/11/04 13:16:40 matched:  new/test/path/ scope: 
=== RUN   TestSearchIndexes/archive
2023/11/04 13:16:40 matched:  test/ scope: 
2023/11/04 13:16:40 matched:  test/path/ scope: 
2023/11/04 13:16:40 matched:  new/ scope: 
2023/11/04 13:16:40 matched:  new/test/ scope: 
2023/11/04 13:16:40 matched:  new/test/path/ scope: 
=== RUN   TestSearchIndexes/video
2023/11/04 13:16:40 matched:  test/ scope: 
2023/11/04 13:16:40 matched:  test/path/ scope: 
2023/11/04 13:16:40 matched:  new/ scope: 
2023/11/04 13:16:40 matched:  new/test/ scope: 
2023/11/04 13:16:40 matched:  new/test/path/ scope: 
--- PASS: TestSearchIndexes (0.03s)
    --- PASS: TestSearchIndexes/audio (0.03s)
    --- PASS: TestSearchIndexes/test (0.00s)
    --- PASS: TestSearchIndexes/archive (0.00s)
    --- PASS: TestSearchIndexes/video (0.00s)
=== RUN   Test_scopedPathNameFilter
--- PASS: Test_scopedPathNameFilter (0.00s)
=== RUN   Test_isDoc
--- PASS: Test_isDoc (0.00s)
=== RUN   Test_getFileSize
--- PASS: Test_getFileSize (0.00s)
=== RUN   Test_isArchive
--- PASS: Test_isArchive (0.00s)
=== RUN   Test_getLastPathComponent
--- PASS: Test_getLastPathComponent (0.00s)
=== RUN   Test_generateRandomHash
--- PASS: Test_generateRandomHash (0.00s)
PASS
ok  	github.com/gtsteffaniak/filebrowser/index	1.069s
=== RUN   TestMatchHidden
--- PASS: TestMatchHidden (0.00s)
PASS
ok  	github.com/gtsteffaniak/filebrowser/rules	1.025s
=== RUN   TestParseUnixCommand
--- PASS: TestParseUnixCommand (0.00s)
=== RUN   TestParseWindowsCommand
--- PASS: TestParseWindowsCommand (0.00s)
=== RUN   TestSplitCommandAndArgs
--- PASS: TestSplitCommandAndArgs (0.00s)
=== RUN   ExampleSplitCommandAndArgs
--- PASS: ExampleSplitCommandAndArgs (0.00s)
PASS
ok  	github.com/gtsteffaniak/filebrowser/runner	1.030s
?   	github.com/gtsteffaniak/filebrowser/share	[no test files]
?   	github.com/gtsteffaniak/filebrowser/storage	[no test files]
?   	github.com/gtsteffaniak/filebrowser/storage/bolt	[no test files]
=== RUN   TestInitialize
--- PASS: TestInitialize (0.00s)
=== RUN   Test_loadConfigFile
--- PASS: Test_loadConfigFile (0.00s)
=== RUN   Test_setDefaults
--- PASS: Test_setDefaults (0.00s)
=== RUN   TestSettings_MakeUserDir
--- PASS: TestSettings_MakeUserDir (0.00s)
=== RUN   Test_cleanUsername
--- PASS: Test_cleanUsername (0.00s)
=== RUN   TestConfigLoadChanged
--- PASS: TestConfigLoadChanged (0.01s)
=== RUN   TestConfigLoadSpecificValues
--- PASS: TestConfigLoadSpecificValues (0.00s)
PASS
ok  	github.com/gtsteffaniak/filebrowser/settings	1.024s
?   	github.com/gtsteffaniak/filebrowser/version	[no test files]
testing: warning: no tests to run
PASS
ok  	github.com/gtsteffaniak/filebrowser/users	1.011s [no tests to run]